<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Inventário – Veículo Industrial</title>
<style>
  :root { --bg:#ffffff; --ink:#111; --muted:#6b7280; --line:#e5e7eb; --brand:#0ea5e9; }
  html,body { margin:0; padding:0; background:var(--bg); color:var(--ink); font:16px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji"; }
  header { padding:16px; border-bottom:1px solid var(--line); position:sticky; top:0; background:var(--bg); z-index:5; }
  header h1 { margin:0 0 2px; font-size:18px; }
  header p { margin:0; color:var(--muted); font-size:13px; }
  form { padding:16px; display:grid; gap:12px; max-width:720px; margin:0 auto 88px; }
  fieldset { border:1px solid var(--line); border-radius:12px; padding:12px; }
  legend { padding:0 6px; color:var(--muted); font-size:12px; }
  label { display:grid; gap:6px; margin:8px 0; }
  .row { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
  @media (max-width:620px){ .row { grid-template-columns:1fr; } }
  input, select, textarea {
    width:100%; padding:12px 14px; border:1px solid var(--line); border-radius:10px;
    font:inherit; background:#fff; outline:none;
  }
  input:focus, select:focus, textarea:focus { border-color:var(--brand); box-shadow:0 0 0 4px rgba(14,165,233,.12); }
  .hint { color:var(--muted); font-size:12px; }
  .chips { display:flex; flex-wrap:wrap; gap:8px; }
  .chip input { display:none; }
  .chip label {
    border:1px solid var(--line); padding:8px 10px; border-radius:999px; font-size:14px; cursor:pointer;
  }
  .chip input:checked + label { border-color:var(--brand); background:rgba(14,165,233,.08); }
  .footerbar {
    position:fixed; left:0; right:0; bottom:0; background:linear-gradient(180deg, rgba(255,255,255,.2), #fff);
    border-top:1px solid var(--line); padding:12px; display:grid; gap:8px; z-index:10;
  }
  .actions { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
  @media (max-width:420px){ .actions { grid-template-columns:1fr; } }
  .btn { padding:14px; border-radius:12px; border:none; font-weight:600; cursor:pointer; }
  .primary { background:var(--brand); color:white; }
  .ghost { background:#fff; border:1px solid var(--line); }
  .small { font-size:12px; color:var(--muted); text-align:center; }
</style>
</head>
<body>
  <header>
    <h1>Inventário – Veículo Industrial</h1>
    <p>Preencha os dados, gere o texto único e compartilhe no WhatsApp.</p>
  </header>

  <form id="formInv">
    <fieldset>
      <legend>Classificação do Equipamento</legend>
      <div>
        <div class="hint">Modalidade</div>
        <div class="chips">
          <span class="chip"><input type="radio" id="mod1" name="modalidade" value="Scania"><label for="mod1">Scania</label></span>
          <span class="chip"><input type="radio" id="mod2" name="modalidade" value="Alugado"><label for="mod2">Alugado</label></span>
        </div>
      </div>
      <div class="row">
        <label>Ativo (nº)
          <input name="ativo" placeholder="Ex.: 123456" />
        </label>
        <label>Horímetro atual (h)
          <input name="horimetro" inputmode="decimal" placeholder="Ex.: 3245" />
        </label>
      </div>
      <div>
        <div class="hint">TAG nova padronizada (3 letras e 5 números)</div>
        <div class="chips">
          <span class="chip"><input type="radio" id="tag1" name="tag_nova" value="Sim"><label for="tag1">Sim</label></span>
          <span class="chip"><input type="radio" id="tag2" name="tag_nova" value="Não"><label for="tag2">Não</label></span>
        </div>
      </div>
      <div>
        <div class="hint">Plaqueta de ativo financeiro</div>
        <div class="chips">
          <span class="chip"><input type="radio" id="pla1" name="plaqueta_fin" value="Sim"><label for="pla1">Sim</label></span>
          <span class="chip"><input type="radio" id="pla2" name="plaqueta_fin" value="Não"><label for="pla2">Não</label></span>
        </div>
      </div>
      <label>Tipo de Equipamento
        <select name="tipo_equip">
          <option value="" selected disabled>Selecione</option>
          <option>Empilhadeira Elétrica</option>
          <option>Empilhadeira Combustão</option>
          <option>Empilhadeira Articulada</option>
          <option>Empilhadeira Diesel</option>
          <option>Rebocador Elétrico</option>
          <option>Rebocador Combustão</option>
          <option>Carrinho Elétrico</option>
          <option>Paleteira Elétrica</option>
          <option>Transpaleteira Elétrica</option>
          <option>Empilhadeira Elétrica Manual</option>
          <option>Ergomover</option>
          <option>Plataforma Elevatória Tesoura</option>
          <option>Plataforma Elevatória Articulada</option>
        </select>
      </label>
    </fieldset>

    <fieldset>
      <legend>Especificações</legend>
      <div class="row">
        <label>Marca
          <input name="marca" placeholder="Ex.: Toyota" />
        </label>
        <label>Modelo
          <input name="modelo" placeholder="Ex.: 8FBE18" />
        </label>
      </div>
      <div class="row">
        <label>Capacidade Máxima (kg)
          <input name="capacidade" inputmode="decimal" placeholder="Ex.: 1800" />
        </label>
        <label>Ano de Fabricação
          <input name="ano_fab" inputmode="numeric" pattern="\\d{4}" placeholder="Ex.: 2019" />
        </label>
      </div>
      <div class="row">
        <label>Número de Série
          <input name="num_serie" placeholder="Ex.: 12345XYZ" />
        </label>
        <label>Tag da Bateria
          <input name="tag_bateria" placeholder="Ex.: BAT-00001" />
        </label>
      </div>
      <div class="row">
        <label>Ano da Bateria
          <input name="ano_bateria" inputmode="numeric" pattern="\\d{4}" placeholder="Ex.: 2022" />
        </label>
        <div></div>
      </div>
    </fieldset>

    <fieldset>
      <legend>Localização / Responsável</legend>
      <div class="row">
        <label>Área em que se encontra o equipamento
          <input name="area" placeholder="Ex.: Montagem Final" />
        </label>
        <label>Prédio
          <input name="predio" placeholder="Ex.: B" />
        </label>
      </div>
      <label>Centro de Custo Responsável
        <input name="ccusto" placeholder="Ex.: 1234 - Logística" />
      </label>
    </fieldset>

    <fieldset>
      <legend>Fotos do equipamento (opcional)</legend>
      <label>Selecionar fotos (máx. 10)
        <input id="fotos" type="file" accept="image/*" multiple />
      </label>
      <div class="hint">Se suportado, “Compartilhar (texto + fotos)” usa o menu do sistema (WhatsApp etc.). Senão, use “WhatsApp (só texto)” e envie as fotos depois.</div>
    </fieldset>

    <fieldset>
      <legend>Destino (opcional)</legend>
      <label>Nº do WhatsApp (somente dígitos com DDI/DDD)
        <input id="waNumber" inputmode="numeric" pattern="\\d{10,15}" placeholder="Ex.: 55XXXXXXXXXXX" />
      </label>
      <div class="hint">Deixe em branco para escolher contato/grupo ao abrir o WhatsApp.</div>
    </fieldset>
  </form>

  <div class="footerbar">
    <div class="actions">
      <button class="btn ghost" id="btnPreview" type="button">Pré-visualizar texto</button>
      <button class="btn primary" id="btnShare" type="button">Compartilhar (texto + fotos)</button>
    </div>
    <button class="btn ghost" id="btnWhats" type="button">WhatsApp (só texto)</button>
    <div class="small">Dica: adicione esta página à tela inicial para acesso rápido.</div>
  </div>

<script>
  function coletarDados() {
    const f = document.getElementById('formInv');
    const v = (n) => (f.elements[n]?.value || '').trim();
    const r = (n) => (f.querySelector(`input[name="${n}"]:checked`)?.value || '');

    const dados = {
      modalidade: r('modalidade'),
      ativo: v('ativo'),
      horimetro: v('horimetro'),
      tag_nova: r('tag_nova'),
      plaqueta_fin: r('plaqueta_fin'),
      tipo_equip: v('tipo_equip'),
      marca: v('marca'),
      modelo: v('modelo'),
      capacidade: v('capacidade'),
      ano_fab: v('ano_fab'),
      num_serie: v('num_serie'),
      tag_bateria: v('tag_bateria'),
      ano_bateria: v('ano_bateria'),
      area: v('area'),
      predio: v('predio'),
      ccusto: v('ccusto'),
    };

    const linhas = [];
    linhas.push('INVENTÁRIO – VEÍCULO INDUSTRIAL');
    const header = [
      dados.modalidade ? `Modalidade: ${dados.modalidade}` : '',
      dados.tipo_equip ? `Tipo: ${dados.tipo_equip}` : ''
    ].filter(Boolean).join(' | ');
    if (header) linhas.push(header);

    const idline = [
      dados.ativo ? `Ativo: ${dados.ativo}` : '',
      dados.num_serie ? `Série: ${dados.num_serie}` : ''
    ].filter(Boolean).join(' | ');
    if (idline) linhas.push(idline);

    const especs = [
      dados.marca ? `Marca: ${dados.marca}` : '',
      dados.modelo ? `Modelo: ${dados.modelo}` : '',
      dados.capacidade ? `Capacidade Máx.: ${dados.capacidade} kg` : '',
      dados.ano_fab ? `Ano Fab.: ${dados.ano_fab}` : ''
    ].filter(Boolean).join(' | ');
    if (especs) linhas.push(especs);

    const energia = [
      dados.tag_bateria ? `Tag da Bateria: ${dados.tag_bateria}` : '',
      dados.ano_bateria ? `Ano da Bateria: ${dados.ano_bateria}` : ''
    ].filter(Boolean).join(' | ');
    if (energia) linhas.push(energia);

    const estado = [
      dados.horimetro ? `Horímetro atual: ${dados.horimetro} h` : '',
      dados.tag_nova ? `TAG padronizada: ${dados.tag_nova}` : '',
      dados.plaqueta_fin ? `Plaqueta ativo financeiro: ${dados.plaqueta_fin}` : '',
    ].filter(Boolean).join(' | ');
    if (estado) linhas.push(estado);

    const local = [
      dados.area ? `Área: ${dados.area}` : '',
      dados.predio ? `Prédio: ${dados.predio}` : '',
      dados.ccusto ? `Centro de Custo Resp.: ${dados.ccusto}` : '',
    ].filter(Boolean).join(' | ');
    if (local) linhas.push(local);

    const texto = linhas.join('\n');
    return { dados, texto };
  }

  function previsualizar() {
    const { texto } = coletarDados();
    alert(texto);
  }

  async function compartilhar() {
    const { texto } = coletarDados();
    const fileInput = document.getElementById('fotos');
    const files = Array.from(fileInput.files || []).slice(0, 10);

    if (navigator.canShare && files.length && navigator.canShare({ files })) {
      try {
        await navigator.share({ text: texto, files });
        return;
      } catch (e) {
        console.warn('Falha ao compartilhar com arquivos, tentando apenas texto...', e);
      }
    }

    if (navigator.share) {
      try {
        await navigator.share({ text: texto });
        return;
      } catch (e) {
        console.warn('Falha no navigator.share, abrindo WhatsApp...', e);
      }
    }

    abrirWhatsApp(texto);
  }

  function abrirWhatsApp(texto) {
    const num = (document.getElementById('waNumber').value || '').replace(/\D/g, '');
    const encoded = encodeURIComponent(texto);
    const url = num
      ? `https://api.whatsapp.com/send?phone=${num}&text=${encoded}`
      : `https://api.whatsapp.com/send?text=${encoded}`;
    window.location.href = url;
  }

  document.getElementById('btnPreview').addEventListener('click', previsualizar);
  document.getElementById('btnShare').addEventListener('click', compartilhar);
  document.getElementById('btnWhats').addEventListener('click', () => {
    const { texto } = coletarDados();
    abrirWhatsApp(texto);
  });
</script>
</body>
</html>